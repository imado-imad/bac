<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baccalaureate Subjects Portal | 2008-2025</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
   * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    
}

body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    overflow-x: hidden;
}

/* Start Screen Styles */
.start-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: all 0.8s ease;
}

.start-screen.fade-out {
    opacity: 0;
    transform: scale(1.1);
}

.start-content {
    text-align: center;
    color: white;
    z-index: 2;
}

.logo-container {
    font-size: 4rem;
    margin-bottom: 1rem;
    animation: float 3s ease-in-out infinite;
}

.start-title {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    background: linear-gradient(45deg, #fff, #f0f0f0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.start-subtitle {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    opacity: 0.9;
}

.enter-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    color: white;
    padding: 1rem 2rem;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0 auto;
}

.enter-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
}

/* Main App Styles */
.main-app {
    min-height: 100vh;
    transition: all 0.8s ease;
}

.main-app.hidden {
    opacity: 0;
    transform: translateY(50px);
}

.hidden {
    display: none !important;
}

/* Header Styles */
.header {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding: 1rem 0;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: white;
    font-size: 1.5rem;
    font-weight: 600;
}

.logo i {
    font-size: 2rem;
}

.nav {
    display: flex;
    gap: 1rem;
}

.nav-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.nav-btn:hover,
.nav-btn.active {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

/* Page Header */
.page-header {
    text-align: center;
    margin-bottom: 3rem;
    color: white;
}

.page-header h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.page-header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

/* Years Grid */
.years-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.year-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
    position: relative;
    overflow: hidden;
}

.year-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s ease;
}

.year-card:hover::before {
    left: 100%;
}

.year-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    background: rgba(255, 255, 255, 0.15);
}

.year-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: #ffd700;
}

.year-number {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.year-label {
    opacity: 0.8;
    font-size: 0.9rem;
}

/* Subjects View */
.subjects-header {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-bottom: 3rem;
    color: white;
}

.back-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
}

.back-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateX(-5px);
}

.year-info h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.year-info p {
    opacity: 0.9;
    font-size: 1.1rem;
}

/* Subjects Grid */
.subjects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
}

.subject-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 2rem;
    color: white;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.subject-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    background: rgba(255, 255, 255, 0.15);
}

.subject-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.subject-icon {
    font-size: 2.5rem;
    color: #ffd700;
}

.subject-info h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.subject-info p {
    opacity: 0.8;
    font-size: 0.9rem;
}

.subject-actions {
    display: flex;
    gap: 1rem;
}

.action-btn {
    flex: 1;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
}

.action-btn.primary {
    background: linear-gradient(45deg, #667eea, #764ba2);
    border: none;
}

.action-btn.secondary {
    background: linear-gradient(45deg, #f093fb, #f5576c);
    border: none;
}

.action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* Animations */
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in-up {
    animation: fadeInUp 0.6s ease forwards;
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: 1rem;
    }
    
    .start-title {
        font-size: 2.5rem;
    }
    
    .page-header h1 {
        font-size: 2rem;
    }
    
    .years-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
    }
    
    .subjects-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .subjects-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .year-info h1 {
        font-size: 2rem;
    }
    
    .subject-actions {
        flex-direction: column;
    }
    
    .header-content {
        padding: 0 1rem;
    }
    
    .nav {
        gap: 0.5rem;
    }
    
    .nav-btn span {
        display: none;
    }
}

@media (max-width: 480px) {
    .year-card {
        padding: 1.5rem;
    }
    
    .subject-card {
        padding: 1.5rem;
    }
    
    .start-title {
        font-size: 2rem;
    }
    
    .logo span {
        display: none;
    }
} 
</style>
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen" class="start-screen">
        <div class="start-content">
            <div class="logo-container">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h1 class="start-title">Baccalaureate Portal</h1>
            <p class="start-subtitle">Access exam subjects from 2008 to 2025</p>
            <button id="enter-btn" class="enter-btn">
                <span>Enter Portal</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
        <div class="particles"></div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Baccalaureate Portal</span>
                </div>
                <nav class="nav">
                    <button id="home-btn" class="nav-btn active">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button id="about-btn" class="nav-btn">
                        <i class="fas fa-info-circle"></i>
                        <span>About</span>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Years Grid -->
        <main id="years-view" class="years-view">
            <div class="container">
                <div class="page-header">
                    <h1>Select Academic Year</h1>
                    <p>Choose from baccalaureate exam years 2008-2025</p>
                </div>
                <div id="years-grid" class="years-grid">
                    <!-- Years will be populated by JavaScript -->
                </div>
            </div>
        </main>

        <!-- Subjects View -->
        <div id="subjects-view" class="subjects-view hidden">
            <div class="container">
                <div class="subjects-header">
                    <button id="back-btn" class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to Years</span>
                    </button>
                    <div class="year-info">
                        <h1 id="selected-year">2025</h1>
                        <p>Baccalaureate Subjects</p>
                    </div>
                </div>
                <div id="subjects-grid" class="subjects-grid">
                    <!-- Subjects will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
// Application state
let currentView = 'start';
let selectedYear = null;

// Subject data with icons and colors
const subjects = {
    'Mathematics': { icon: 'fas fa-calculator', color: '#000000' },
    'Physics Sciences': { icon: 'fas fa-atom', color: '#e74c3c' },
    'Natural Science': { icon: 'fas fa-dna', color: '#27ae60' },
    'Arabic language': { icon: 'fas fa-book', color: '#9b59b6' },
    'History and Geography': { icon: 'fas fa-landmark', color: '#f39c12' },
    'Islamic Sciences': { icon: 'fas fa-globe', color: '#1abc9c' },
    'Philosophy': { icon: 'fas fa-brain', color: '#34495e' },
    'French language': { icon: 'fas fa-language', color: '#e67e22' },
    'English language': { icon: 'fas fa-language', color: '#8e44ad' },
    'Amazigh language': { icon: 'fas fa-language', color: '#2ecc71' },
};

// Generate Image URLs
function generateImageUrl(year, subject, type) {
    const baseUrl = 'https://imado-imad.github.io/bac1/images';
    const subjectCode = subject.toLowerCase().replace(/\s+/g, '-');
    return `${baseUrl}/${year}-${subjectCode}-${type}.jpg`;
}

// DOM Elements
const startScreen = document.getElementById('start-screen');
const mainApp = document.getElementById('main-app');
const enterBtn = document.getElementById('enter-btn');
const yearsView = document.getElementById('years-view');
const subjectsView = document.getElementById('subjects-view');
const yearsGrid = document.getElementById('years-grid');
const subjectsGrid = document.getElementById('subjects-grid');
const backBtn = document.getElementById('back-btn');
const selectedYearElement = document.getElementById('selected-year');
const homeBtn = document.getElementById('home-btn');

// Initialize application
function init() {
    createParticles();
    generateYears();
    setupEventListeners();
}

// Create animated particles for start screen
function createParticles() {
    const particlesContainer = document.querySelector('.particles');
    for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.style.cssText = `
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation: float ${3 + Math.random() * 4}s ease-in-out infinite;
            animation-delay: ${Math.random() * 2}s;
        `;
        particlesContainer.appendChild(particle);
    }
}

// Generate years grid (2008-2025)
function generateYears() {
    yearsGrid.innerHTML = '';
    const currentYear = new Date().getFullYear();
    
    for (let year = 2008; year <= 2025; year++) {
        const yearCard = document.createElement('div');
        yearCard.className = 'year-card fade-in-up';
        yearCard.style.animationDelay = `${(year - 2008) * 0.1}s`;
        
        const isCurrentYear = year === currentYear;
        const isFutureYear = year > currentYear;
        
        yearCard.innerHTML = `
            <div class="year-icon">
                <i class="${getYearIcon(year)}"></i>
            </div>
            <div class="year-number">${year}</div>
            <div class="year-label">
                ${isCurrentYear ? 'Current Year' : isFutureYear ? 'Upcoming' : 'Past Exam'}
            </div>
        `;
        
        yearCard.addEventListener('click', () => showSubjects(year));
        yearsGrid.appendChild(yearCard);
    }
}

// Get appropriate icon for year
function getYearIcon(year) {
    const icons = [
        'fas fa-graduation-cap',
        'fas fa-medal',
        'fas fa-trophy',
        'fas fa-star',
        'fas fa-crown',
        'fas fa-gem'
    ];
    return icons[year % icons.length];
}

// Show subjects for selected year
function showSubjects(year) {
    selectedYear = year;
    selectedYearElement.textContent = year;
    
    // Generate subjects grid
    subjectsGrid.innerHTML = '';
    
    Object.entries(subjects).forEach(([subjectName, subjectData], index) => {
        const subjectCard = document.createElement('div');
        subjectCard.className = 'subject-card fade-in-up';
        subjectCard.style.animationDelay = `${index * 0.1}s`;
        
        subjectCard.innerHTML = `
            <div class="subject-header">
                <div class="subject-icon">
                    <i class="${subjectData.icon}" style="color: ${subjectData.color}"></i>
                </div>
                <div class="subject-info">
                    <h3>${subjectName}</h3>
                    <p>Baccalaureate ${year}</p>
                </div>
            </div>
            <div class="subject-actions">
                <button class="action-btn primary" onclick="openImage('${year}', '${subjectName}', 'exam')">
                    <i class="fas fa-file-pdf"></i>
                    <span>View Exam</span>
                </button>
                <button class="action-btn secondary" onclick="openImage('${year}', '${subjectName}', 'solution')">
                    <i class="fas fa-key"></i>
                    <span>View Solution</span>
                </button>
            </div>
        `;
        
        subjectsGrid.appendChild(subjectCard);
    });
    
    // Switch views
    yearsView.classList.add('hidden');
    subjectsView.classList.remove('hidden');
    currentView = 'subjects';
}

// Open image in same window
function openImage(year, subject, type) {
    const imageUrl = generateImageUrl(year, subject, type);
    
    // Create image viewer in the same window
    showImageViewer(imageUrl, `${subject} - ${type === 'exam' ? 'Exam' : 'Solution'} (${year})`);
}

// Helper function to create control buttons
function createControlButton(text, title) {
    const button = document.createElement('button');
    button.textContent = text;
    button.title = title;
    button.style.cssText = `
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        width: clamp(40px, 8vw, 50px);
        height: clamp(40px, 8vw, 50px);
        border-radius: 50%;
        cursor: pointer;
        font-size: clamp(1.2rem, 3vw, 1.5rem);
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    `;
    
    button.addEventListener('mouseenter', () => {
        button.style.background = 'rgba(255, 255, 255, 0.2)';
        button.style.transform = 'scale(1.1)';
    });
    
    button.addEventListener('mouseleave', () => {
        button.style.background = 'rgba(255, 255, 255, 0.1)';
        button.style.transform = 'scale(1)';
    });
    
    return button;
}

// Mobile touch detection utility
function isMobileDevice() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
           ('ontouchstart' in window) || 
           (navigator.maxTouchPoints > 0);
}

// Enhanced full-screen responsive image viewer with mobile touch support
function showImageViewer(imageUrl, title) {
    // Remove existing viewer if present
    const existingViewer = document.getElementById('image-viewer');
    if (existingViewer) {
        existingViewer.remove();
    }

    // Create full-screen viewer overlay
    const viewer = document.createElement('div');
    viewer.id = 'image-viewer';
    viewer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        opacity: 0;
        transition: all 0.3s ease;
        overflow: hidden;
        user-select: none;
    `;

    // Fixed Header with title and controls (independent of image)
    const header = document.createElement('div');
    header.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 100%);
        padding: clamp(1rem, 3vw, 2rem);
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 10001;
        height: 80px;
        box-sizing: border-box;
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    `;

    // Title
    const titleElement = document.createElement('h2');
    titleElement.textContent = title;
    titleElement.style.cssText = `
        color: white;
        font-size: clamp(1.2rem, 4vw, 2rem);
        font-weight: 600;
        margin: 0;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    `;

    // Controls container
    const controls = document.createElement('div');
    controls.style.cssText = `
        display: flex;
        gap: clamp(0.5rem, 2vw, 1rem);
        align-items: center;
        flex-shrink: 0;
    `;

    // Control buttons
    const zoomReset = createControlButton('⌂', 'Reset Zoom');
    const zoomIn = createControlButton('+', 'Zoom In');
    const closeBtn = createControlButton('×', 'Close');

    controls.appendChild(zoomReset);
    controls.appendChild(zoomIn);
    controls.appendChild(closeBtn);

    header.appendChild(titleElement);
    header.appendChild(controls);

    // Scrollable image container (independent of header)
    const imageContainer = document.createElement('div');
    imageContainer.style.cssText = `
        position: absolute;
        top: 80px;
        left: 0;
        right: 0;
        bottom: 0;
        overflow-y: auto;
        overflow-x: auto;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        box-sizing: border-box;
        background: rgba(0, 0, 0, 0.5);
    `;

    // Main image with zoom state
    const img = document.createElement('img');
    let currentZoom = 1;
    let isZoomed = false;
    
    img.style.cssText = `
        width: auto;
        height: auto;
        max-width: none;
        min-width: 100%;
        object-fit: contain;
        transition: transform 0.3s ease;
        border-radius: 8px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        user-select: none;
        cursor: grab;
        display: block;
        margin: 0 auto;
        transform-origin: center;
    `;

    // Mobile touch support for double-tap zoom
    if (isMobileDevice()) {
        let lastTouchTime = 0;
        let touchCount = 0;
        
        img.addEventListener('touchstart', function(e) {
            e.preventDefault();
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTouchTime;
            
            if (tapLength < 500 && tapLength > 0) {
                // Double tap detected
                touchCount++;
                if (touchCount === 1) {
                    // This is the second tap of a double tap
                    if (!isZoomed) {
                        // Zoom in to 2x
                        currentZoom = 2;
                        isZoomed = true;
                        img.style.transform = `scale(${currentZoom})`;
                    } else {
                        // Reset zoom
                        currentZoom = 1;
                        isZoomed = false;
                        img.style.transform = `scale(${currentZoom})`;
                    }
                    touchCount = 0;
                }
            } else {
                touchCount = 0;
            }
            
            lastTouchTime = currentTime;
        }, { passive: false });
        
        // Reset touch count after delay
        img.addEventListener('touchend', function() {
            setTimeout(() => {
                touchCount = 0;
            }, 500);
        });
    }

    // Desktop double-click zoom functionality
    img.addEventListener('dblclick', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        if (!isZoomed) {
            // Zoom in to 2x
            currentZoom = 2;
            isZoomed = true;
            img.style.transform = `scale(${currentZoom})`;
            img.style.cursor = 'zoom-out';
        } else {
            // Reset zoom
            currentZoom = 1;
            isZoomed = false;
            img.style.transform = `scale(${currentZoom})`;
            img.style.cursor = 'grab';
        }
    });

    // Prevent double-click/touch zoom on container
    imageContainer.addEventListener('dblclick', function(e) {
        if (e.target === imageContainer) {
            e.preventDefault();
            e.stopPropagation();
        }
    });
    
    imageContainer.addEventListener('touchstart', function(e) {
        if (e.target === imageContainer) {
            e.preventDefault();
            e.stopPropagation();
        }
    }, { passive: false });

    // Loading indicator
    const loader = document.createElement('div');
    loader.style.cssText = `
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: clamp(1rem, 3vw, 1.5rem);
        text-align: center;
        z-index: 10002;
    `;
    loader.innerHTML = `
        <div style="margin-bottom: 1rem;">
            <i class="fas fa-spinner fa-spin" style="font-size: 2rem;"></i>
        </div>
        <div>Loading image...</div>
    `;

    // Error message
    const errorMsg = document.createElement('div');
    errorMsg.style.cssText = `
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: clamp(1rem, 3vw, 1.5rem);
        text-align: center;
        z-index: 10002;
        display: none;
    `;
    errorMsg.innerHTML = `
        <div style="margin-bottom: 1rem;">
            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #f39c12;"></i>
        </div>
        <div>Failed to load image</div>
        <div style="font-size: 0.9rem; opacity: 0.7; margin-top: 0.5rem;">Please check your internet connection</div>
    `;

    // Image load handlers
    img.onload = function() {
        loader.style.display = 'none';
        img.style.opacity = '1';
    };

    img.onerror = function() {
        loader.style.display = 'none';
        errorMsg.style.display = 'block';
    };

    // Set image source
    img.src = imageUrl;
    img.style.opacity = '0';

    // Button event handlers
    zoomIn.addEventListener('click', () => {
        currentZoom = Math.min(currentZoom * 1.5, 5);
        img.style.transform = `scale(${currentZoom})`;
        isZoomed = currentZoom > 1;
        img.style.cursor = isZoomed ? 'zoom-out' : 'grab';
    });

    zoomReset.addEventListener('click', () => {
        currentZoom = 1;
        isZoomed = false;
        img.style.transform = `scale(${currentZoom})`;
        img.style.cursor = 'grab';
        imageContainer.scrollTo(0, 0);
    });

    closeBtn.addEventListener('click', () => {
        viewer.style.opacity = '0';
        viewer.style.transform = 'scale(0.9)';
        setTimeout(() => {
            viewer.remove();
        }, 300);
    });

    // Keyboard shortcuts
    const handleKeydown = (e) => {
        switch(e.key) {
            case 'Escape':
                closeBtn.click();
                break;
            case '+':
            case '=':
                e.preventDefault();
                zoomIn.click();
                break;
            case '-':
                e.preventDefault();
                if (currentZoom > 1) {
                    currentZoom = Math.max(currentZoom / 1.5, 1);
                    img.style.transform = `scale(${currentZoom})`;
                    isZoomed = currentZoom > 1;
                    img.style.cursor = isZoomed ? 'zoom-out' : 'grab';
                }
                break;
            case '0':
                e.preventDefault();
                zoomReset.click();
                break;
        }
    };

    document.addEventListener('keydown', handleKeydown);

    // Cleanup on close
    const cleanup = () => {
        document.removeEventListener('keydown', handleKeydown);
    };

    viewer.addEventListener('remove', cleanup);

    // Assemble viewer
    imageContainer.appendChild(img);
    imageContainer.appendChild(loader);
    imageContainer.appendChild(errorMsg);
    viewer.appendChild(header);
    viewer.appendChild(imageContainer);
    document.body.appendChild(viewer);

    // Animate in
    requestAnimationFrame(() => {
        viewer.style.opacity = '1';
    });
}

// Setup event listeners
function setupEventListeners() {
    // Start screen
    enterBtn.addEventListener('click', () => {
        startScreen.classList.add('fade-out');
        setTimeout(() => {
            startScreen.classList.add('hidden');
            mainApp.classList.remove('hidden');
            currentView = 'years';
        }, 800);
    });

    // Navigation
    homeBtn.addEventListener('click', () => {
        if (currentView !== 'years') {
            subjectsView.classList.add('hidden');
            yearsView.classList.remove('hidden');
            currentView = 'years';
            homeBtn.classList.add('active');
        }
    });

    backBtn.addEventListener('click', () => {
        subjectsView.classList.add('hidden');
        yearsView.classList.remove('hidden');
        currentView = 'years';
        homeBtn.classList.add('active');
    });
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>